multi-model-platform-backend/
├── app/
│   ├── __init__.py
│   ├── main.py                    # FastAPI应用入口
│   ├── config.py                  # 配置加载（从.env或默认值）
│   ├── database.py                # 数据库连接和会话管理 (SQLAlchemy)
│   ├── dependencies.py            # 依赖注入（如获取当前用户、数据库会话）
│   ├── middleware.py              # 中间件（日志、限流、认证、CORS、错误处理等）
│   ├── exceptions.py              # 自定义异常类
│   │
│   ├── api/                       # API 路由层（控制器）
│   │   ├── __init__.py
│   │   ├── v1/                    # API 版本1
│   │   │   ├── __init__.py
│   │   │   ├── router.py         # 主路由注册（汇总所有子路由）
│   │   │   ├── auth.py           # 认证路由 (注册、登录、登出)
│   │   │   ├── users.py          # 用户管理路由 (个人资料、设置)
│   │   │   ├── conversations.py  # 对话管理路由 (创建对话、发送消息、查看历史、删除记录)
│   │   │   ├── models.py         # 模型配置路由 (获取模型列表、配置DeepSeek等)
│   │   │   └── admin.py          # 管理员路由 (仪表盘、用户管理、系统监控)
│   │   └── health.py             # 健康检查路由
│   │
│   ├── core/                      # 核心业务层（通用逻辑与配置）
│   │   ├── __init__.py
│   │   ├── security.py           # 安全相关（JWT创建/验证、密码哈希/验证）
│   │   ├── models.py             # 全局共用的 Pydantic 模型/基类
│   │   └── constants.py          # 常量定义（如错误码、模型名称枚举）
│   │
│   ├── services/                  # 业务服务层（实现详细设计中的程序逻辑）
│   │   ├── __init__.py
│   │   ├── auth_service.py       # 对应程序1、2：用户注册、登录、会话管理
│   │   ├── user_service.py       # 用户资料、设置管理
│   │   ├── conversation_service.py  # 对应程序3、5、7：对话、历史、删除记录
│   │   ├── model_service.py      # 对应程序6：模型配置管理
│   │   ├── model_router.py       # 对应程序4：模型路由与API调用
│   │   └── admin_service.py      # 对应程序8：管理员仪表盘数据统计
│   │
│   ├── repositories/              # 数据访问层（Repository模式，与数据库交互）
│   │   ├── __init__.py
│   │   ├── base.py               # 基础Repository类
│   │   ├── user_repository.py    # 操作用户表 (users, login_attempts)
│   │   ├── conversation_repository.py  # 操作对话表 (conversations)
│   │   ├── message_repository.py # 操作消息表 (messages)
│   │   ├── model_repository.py   # 操作系统模型配置表 (system_models)
│   │   └── user_model_config_repository.py  # 操作用户模型配置表 (user_model_configs)
│   │
│   ├── models/                    # SQLAlchemy ORM 模型（对应数据库表）
│   │   ├── __init__.py           # 导入所有模型，方便数据库使用
│   │   ├── user.py               # 对应 `users` 表
│   │   ├── conversation.py       # 对应 `conversations` 表
│   │   ├── message.py            # 对应 `messages` 表
│   │   ├── system_model.py       # 对应 `system_models` 表
│   │   └── user_model_config.py  # 对应 `user_model_configs` 表
│   │
│   ├── schemas/                   # Pydantic 模式（请求/响应数据验证与序列化）
│   │   ├── __init__.py
│   │   ├── auth.py               # 登录/注册请求响应
│   │   ├── user.py               # 用户相关请求响应
│   │   ├── conversation.py       # 对话相关请求响应
│   │   ├── message.py            # 消息相关请求响应
│   │   └── model.py              # 模型配置相关请求响应
│   │
│   ├── utils/                     # 工具函数与辅助类
│   │   ├── __init__.py
│   │   ├── validators.py         # 自定义数据验证器
│   │   ├── helpers.py            # 通用辅助函数
│   │   ├── logger.py             # 日志配置
│   │   └── api_clients/          # 第三方大模型 API 客户端
│   │       ├── __init__.py
│   │       ├── base_client.py    # 基础客户端（重试、错误处理）
│   │       ├── openai_client.py  # OpenAI API 客户端
│   │       ├── deepseek_client.py # DeepSeek API 客户端
│   │       └── wenxin_client.py  # 文心一言 API 客户端
│   │
│   └── tests/                     # 测试目录
│       ├── __init__.py
│       ├── conftest.py           # 测试固件（数据库、客户端）
│       ├── test_auth.py
│       ├── test_users.py
│       ├── test_conversations.py
│       └── test_models.py
│
├── scripts/                       # 脚本目录（代替alembic）
│   ├── init_db.py                 # 数据库初始化（创建表，插入基础数据如system_models）
│   ├── create_admin.py            # 创建管理员用户脚本
│   └── seed_data.py               # 可选的测试数据脚本
│
├── .env.example                   # 环境变量示例（数据库URL、JWT密钥、各API密钥等）
├── .gitignore
├── requirements.txt               # 主依赖：fastapi, sqlalchemy, pymysql, pydantic, python-jose, passlib等
├── pyproject.toml                 # 项目配置（可选，用于modern打包）
├── README.md                      # 项目说明、启动指南
└── run.py                         # 应用启动脚本（可选，`python run.py`）
